swagger: '2.0'

info:
  description: |
    PJMS API
  version: 1.0.0
  title: PJMS

schemes:
  - http

consumes:
  - application/json
produces:
  - application/json

paths:
  /image:
    post:
      tags:
        - image
      summary: 画像アップロード
      parameters:
        - in: body
          name: image
          required: true
          schema:
            $ref: '#/definitions/ImageWithFileName'
      responses:
        201:
          description: Created
          schema:
            $ref: '#/definitions/ImageWithUrl'
        401:
          description: Unauthorized
        422:
          description: Unprocessable Entity
          schema:
            $ref: '#/definitions/ApiError'
        500:
          description: Internal Server Error

  /customer/login:
    post:
      tags:
        - customer
      summary: ログイン
      parameters:
        - in: body
          name: customer
          required: true
          schema:
            $ref: '#/definitions/CustomerLogin'
      responses:
        200:
          description: OK
          schema:
            $ref: '#/definitions/Token'
        401:
          description: Unauthorized
        404:
          description: Not Found
        422:
          description: Unprocessable Entity
          schema:
            $ref: '#/definitions/ApiError'
        500:
          description: Internal Server Error

  /member:
    post:
      tags:
        - customer
      summary: 会員新規作成
      parameters:
        - in: body
          name: customer
          required: true
          schema:
            $ref: '#/definitions/CustomerWithPasswordWithoutID'
      responses:
        201:
          description: Created
          schema:
            $ref: '#/definitions/Customer'
        401:
          description: Unauthorized
        500:
          description: Internal Server Error

  /member/{id}:
    put:
      tags:
        - customer
      summary: 会員編集
      parameters:
        - name: 'id'
          in: 'path'
          required: true
          type: 'integer'
          format: 'int64'
        - in: body
          name: customer
          required: true
          schema:
            $ref: '#/definitions/CustomerWithoutIDLoginIDClientSystemID'
      responses:
        200:
          description: OK
          schema:
            $ref: '#/definitions/Customer'
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
        500:
          description: Internal Server Error

  /token:
    post:
      tags:
        - token
      summary: トークン発行
      parameters:
        - in: body
          name: customer
          required: true
          schema:
            $ref: '#/definitions/CustomerLoginWithoutPassword'
      responses:
        200:
          description: OK
          schema:
            $ref: '#/definitions/Token'
        401:
          description: Unauthorized
        404:
          description: Not Found
        422:
          description: Unprocessable Entity
          schema:
            $ref: '#/definitions/ApiError'
        500:
          description: Internal Server Error

  /management-user/login:
    post:
      tags:
        - management-user
      summary: ログイン
      parameters:
        - in: body
          name: management-user
          required: true
          schema:
            $ref: '#/definitions/ManagementUserLogin'
      responses:
        200:
          description: OK
          schema:
            $ref: '#/definitions/Token'
        401:
          description: Unauthorized
        404:
          description: Not Found
        422:
          description: Unprocessable Entity
          schema:
            $ref: '#/definitions/ApiError'
        500:
          description: Internal Server Error

  /lottery-box:
    get:
      tags:
        - lottery-box
      summary: 抽選箱検索
      parameters:
        - name: id
          in: query
          type: integer
          format: int64
        - name: name
          in: query
          type: string
      responses:
        200:
          description: OK
          schema:
            type: array
            items:
              $ref: '#/definitions/LotteryBoxWithRelatedInfo'
        401:
          description: Unauthorized
        500:
          description: Internal Server Error

    post:
      tags:
        - lottery-box
      summary: 抽選箱新規作成
      parameters:
        - in: body
          name: lottery-box
          required: true
          schema:
            $ref: '#/definitions/LotteryBoxWithoutIDStatus'
      responses:
        201:
          description: OK
          schema:
            $ref: '#/definitions/LotteryBox'
        400:
          description: Bad Request
          schema:
            $ref: '#/definitions/ApiError'
        401:
          description: Unauthorized
        404:
          description: Not Found
        422:
          description: Unprocessable Entity
          schema:
            $ref: '#/definitions/ApiError'
        500:
          description: Internal Server Error

  /lottery-box/{id}:
    get:
      tags:
        - lottery-box
      summary: 抽選箱ID検索
      parameters:
        - name: 'id'
          in: 'path'
          required: true
          type: 'integer'
          format: 'int64'
      responses:
        200:
          description: OK
          schema:
            $ref: '#/definitions/LotteryBoxWithRelatedInfo'
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
        500:
          description: Internal Server Error

    put:
      tags:
        - lottery-box
      summary: 抽選箱編集
      parameters:
        - name: 'id'
          in: 'path'
          required: true
          type: 'integer'
          format: 'int64'
        - in: body
          name: lottery-box
          required: true
          schema:
            $ref: '#/definitions/LotteryBoxWithoutIDFiniteFlg'
      responses:
        200:
          description: OK
          schema:
            $ref: '#/definitions/LotteryBox'
        400:
          description: Bad Request
          schema:
            $ref: '#/definitions/ApiError'
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
        422:
          description: Unprocessable Entity
          schema:
            $ref: '#/definitions/ApiError'
        500:
          description: Internal Server Error

    delete:
      tags:
        - lottery-box
      summary: 抽選箱削除
      parameters:
        - name: 'id'
          in: 'path'
          required: true
          type: 'integer'
          format: 'int64'
      responses:
        200:
          description: OK
          schema:
            $ref: '#/definitions/LotteryBoxWithDelFlg'
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
        422:
          description: Unprocessable Entity
          schema:
            $ref: '#/definitions/ApiError'
        500:
          description: Internal Server Error

  /customer:
    get:
      tags:
        - customer
      summary: カスタマー検索
      parameters:
        - name: id
          in: query
          type: integer
          format: int64
        - name: name
          in: query
          type: string
        - name: login_id
          in: query
          type: string
        - name: client_system_id
          in: query
          type: string
        - name: tel
          in: query
          type: string
        - name: mail_address
          in: query
          type: string
      responses:
        200:
          description: OK
          schema:
            type: array
            items:
              $ref: '#/definitions/Customer'
        401:
          description: Unauthorized
        500:
          description: Internal Server Error

    post:
      tags:
        - customer
      summary: カスタマー新規作成
      parameters:
        - in: body
          name: customer
          required: true
          schema:
            $ref: '#/definitions/CustomerWithoutID'
      responses:
        201:
          description: OK
          schema:
            $ref: '#/definitions/Customer'
        401:
          description: Unauthorized
        404:
          description: Not Found
        500:
          description: Internal Server Error

  /customer/{id}:
    get:
      tags:
        - customer
      summary: カスタマーID検索
      parameters:
        - name: 'id'
          in: 'path'
          required: true
          type: 'integer'
          format: 'int64'
      responses:
        200:
          description: OK
          schema:
            $ref: '#/definitions/Customer'
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
        500:
          description: Internal Server Error

    put:
      tags:
        - customer
      summary: カスタマー編集
      parameters:
        - name: 'id'
          in: 'path'
          required: true
          type: 'integer'
          format: 'int64'
        - in: body
          name: customer
          required: true
          schema:
            $ref: '#/definitions/CustomerWithoutIDLoginID'
      responses:
        200:
          description: OK
          schema:
            $ref: '#/definitions/Customer'
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
        500:
          description: Internal Server Error

    delete:
      tags:
        - customer
      summary: カスタマー削除
      parameters:
        - name: 'id'
          in: 'path'
          required: true
          type: 'integer'
          format: 'int64'
      responses:
        200:
          description: OK
          schema:
            $ref: '#/definitions/CustomerWithDelFlg'
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
        500:
          description: Internal Server Error

  /management-user:
    get:
      tags:
        - management-user
      summary: 管理画面ユーザー検索
      parameters:
        - name: id
          in: query
          type: integer
          format: int64
        - name: name
          in: query
          type: string
      responses:
        200:
          description: OK
          schema:
            type: array
            items:
              $ref: '#/definitions/ManagementUser'
        401:
          description: Unauthorized
        500:
          description: Internal Server Error

    post:
      tags:
        - management-user
      summary: 管理画面ユーザー新規作成
      parameters:
        - in: body
          name: management-user
          required: true
          schema:
            $ref: '#/definitions/ManagementUserWithPasswordWithoutID'
      responses:
        201:
          description: OK
          schema:
            $ref: '#/definitions/ManagementUser'
        401:
          description: Unauthorized
        404:
          description: Not Found
        500:
          description: Internal Server Error

  /management-user/{id}:
    get:
      tags:
        - management-user
      summary: 管理画面ユーザーID検索
      parameters:
        - name: 'id'
          in: 'path'
          required: true
          type: 'integer'
          format: 'int64'
      responses:
        200:
          description: OK
          schema:
            $ref: '#/definitions/ManagementUser'
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
        500:
          description: Internal Server Error

    put:
      tags:
        - management-user
      summary: 管理画面ユーザー編集
      parameters:
        - name: 'id'
          in: 'path'
          required: true
          type: 'integer'
          format: 'int64'
        - in: body
          name: management-user
          required: true
          schema:
            $ref: '#/definitions/ManagementUserWithoutIDLoginID'
      responses:
        200:
          description: OK
          schema:
            $ref: '#/definitions/ManagementUser'
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
        500:
          description: Internal Server Error

    delete:
      tags:
        - management-user
      summary: 管理画面ユーザー削除
      parameters:
        - name: 'id'
          in: 'path'
          required: true
          type: 'integer'
          format: 'int64'
      responses:
        200:
          description: OK
          schema:
            $ref: '#/definitions/ManagementUserWithDelFlg'
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
        500:
          description: Internal Server Error

  /management-user/{id}/password:
    put:
      tags:
        - management-user
      summary: 管理画面ユーザーパスワード編集
      parameters:
        - name: 'id'
          in: 'path'
          required: true
          type: 'integer'
          format: 'int64'
        - in: body
          name: management-user
          required: true
          schema:
            $ref: '#/definitions/ManagementUserPasswordOnly'
      responses:
        200:
          description: OK
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
        500:
          description: Internal Server Error

  /product:
    get:
      tags:
        - product
      summary: 商品検索
      parameters:
        - name: id
          in: query
          type: integer
          format: int64
        - name: name
          in: query
          type: string
      responses:
        200:
          description: OK
          schema:
            type: array
            items:
              $ref: '#/definitions/ProductWithRelatedInfo'
        401:
          description: Unauthorized
        500:
          description: Internal Server Error

    post:
      tags:
        - product
      summary: 商品新規作成
      parameters:
        - in: body
          name: product
          required: true
          schema:
            $ref: '#/definitions/ProductWithoutIDWithRequiredSetting'
      responses:
        201:
          description: OK
          schema:
            $ref: '#/definitions/Product'
        400:
          description: Bad Request
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
        422:
          description: Unprocessable Entity
          schema:
            $ref: '#/definitions/ApiError'
        500:
          description: Internal Server Error

  /product/{id}:
    get:
      tags:
        - product
      summary: 商品ID検索
      parameters:
        - name: 'id'
          in: 'path'
          required: true
          type: 'integer'
          format: 'int64'
      responses:
        200:
          description: OK
          schema:
            $ref: '#/definitions/ProductWithRelatedInfo'
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
        500:
          description: Internal Server Error

    put:
      tags:
        - product
      summary: 商品編集
      parameters:
        - name: 'id'
          in: 'path'
          required: true
          type: 'integer'
          format: 'int64'
        - in: body
          name: product
          required: true
          schema:
            $ref: '#/definitions/ProductWithoutID'
      responses:
        200:
          description: OK
          schema:
            $ref: '#/definitions/Product'
        400:
          description: Bad Request
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
        422:
          description: Unprocessable Entity
          schema:
            $ref: '#/definitions/ApiError'
        500:
          description: Internal Server Error

    delete:
      tags:
        - product
      summary: 商品削除
      parameters:
        - name: 'id'
          in: 'path'
          required: true
          type: 'integer'
          format: 'int64'
      responses:
        200:
          description: OK
          schema:
            $ref: '#/definitions/ProductWithDelFlg'
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
        422:
          description: Unprocessable Entity
          schema:
            $ref: '#/definitions/ApiError'
        500:
          description: Internal Server Error

  /lottery:
    get:
      tags:
        - lottery
      summary: くじ検索
      parameters:
        - name: lottery-box-id
          in: query
          type: integer
          format: int64
      responses:
        200:
          description: OK
          schema:
            type: array
            items:
              $ref: '#/definitions/LotteryWithRelatedInfo'
        401:
          description: Unauthorized
        500:
          description: Internal Server Error

    post:
      tags:
        - lottery
      summary: くじ新規作成
      parameters:
        - in: body
          name: lottery
          required: true
          schema:
            $ref: '#/definitions/LotteryWithoutIDStatus'
      responses:
        201:
          description: OK
          schema:
            $ref: '#/definitions/Lottery'
        400:
          description: Bad Request
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
        422:
          description: Unprocessable Entity
          schema:
            $ref: '#/definitions/ApiError'
        500:
          description: Internal Server Error

  /lottery/{id}:
    get:
      tags:
        - lottery
      summary: くじID検索
      parameters:
        - name: 'id'
          in: 'path'
          required: true
          type: 'integer'
          format: 'int64'
      responses:
        200:
          description: OK
          schema:
            $ref: '#/definitions/LotteryWithRelatedInfo'
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
        500:
          description: Internal Server Error

    put:
      tags:
        - lottery
      summary: くじ編集
      parameters:
        - name: 'id'
          in: 'path'
          required: true
          type: 'integer'
          format: 'int64'
        - in: body
          name: lottery
          required: true
          schema:
            $ref: '#/definitions/LotteryWithoutID'
      responses:
        200:
          description: OK
          schema:
            $ref: '#/definitions/Lottery'
        400:
          description: Bad Request
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
        422:
          description: Unprocessable Entity
          schema:
            $ref: '#/definitions/ApiError'
        500:
          description: Internal Server Error

    delete:
      tags:
        - lottery
      summary: くじ削除
      parameters:
        - name: 'id'
          in: 'path'
          required: true
          type: 'integer'
          format: 'int64'
      responses:
        200:
          description: OK
          schema:
            $ref: '#/definitions/LotteryWithDelFlg'
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
        422:
          description: Unprocessable Entity
          schema:
            $ref: '#/definitions/ApiError'
        500:
          description: Internal Server Error

  /lottery/bulk:
    post:
      tags:
        - lottery
      summary: くじ複数編集
      parameters:
        - in: body
          name: lottery
          required: true
          schema:
            $ref: '#/definitions/LotteryBulk'
      responses:
        201:
          description: Created
          schema:
            $ref: '#/definitions/LotteryIDArray'
        400:
          description: Bad Request
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
        422:
          description: Unprocessable Entity
          schema:
            $ref: '#/definitions/ApiError'
        500:
          description: Internal Server Error

  /prize-lottery:
    get:
      tags:
        - prize-lottery
      summary: 等賞検索
      parameters:
        - name: id
          in: query
          type: integer
          format: int64
        - name: name
          in: query
          type: string
        - name: lottery-box-id
          in: query
          type: integer
          format: int64
      responses:
        200:
          description: OK
          schema:
            type: array
            items:
              $ref: '#/definitions/PrizeLotteryWithRelatedInfo'
        401:
          description: Unauthorized
        500:
          description: Internal Server Error

    post:
      tags:
        - prize-lottery
      summary: 等賞新規作成
      parameters:
        - in: body
          name: prize-lottery
          required: true
          schema:
            $ref: '#/definitions/PrizeLotteryWithoutIDWithRequiredSetting'
      responses:
        201:
          description: OK
          schema:
            $ref: '#/definitions/PrizeLottery'
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
        422:
          description: Unprocessable Entity
          schema:
            $ref: '#/definitions/ApiError'
        500:
          description: Internal Server Error

  /prize-lottery/{id}:
    get:
      tags:
        - prize-lottery
      summary: 等賞ID検索
      parameters:
        - name: 'id'
          in: 'path'
          required: true
          type: 'integer'
          format: 'int64'
      responses:
        200:
          description: OK
          schema:
            $ref: '#/definitions/PrizeLotteryWithRelatedInfo'
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
        500:
          description: Internal Server Error

    put:
      tags:
        - prize-lottery
      summary: 等賞編集
      parameters:
        - name: 'id'
          in: 'path'
          required: true
          type: 'integer'
          format: 'int64'
        - in: body
          name: prize-lottery
          required: true
          schema:
            $ref: '#/definitions/PrizeLotteryWithoutID'
      responses:
        200:
          description: OK
          schema:
            $ref: '#/definitions/PrizeLottery'
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
        422:
          description: Unprocessable Entity
          schema:
            $ref: '#/definitions/ApiError'
        500:
          description: Internal Server Error

    delete:
      tags:
        - prize-lottery
      summary: 等賞削除
      parameters:
        - name: 'id'
          in: 'path'
          required: true
          type: 'integer'
          format: 'int64'
      responses:
        200:
          description: OK
          schema:
            $ref: '#/definitions/PrizeLotteryWithDelFlg'
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
        422:
          description: Unprocessable Entity
          schema:
            $ref: '#/definitions/ApiError'
        500:
          description: Internal Server Error

  /purchase-info:
    get:
      tags:
        - purchase-info
      summary: くじ購入情報検索
      parameters:
        - name: id
          in: query
          type: integer
          format: int64
        - name: customer-id
          in: query
          type: integer
          format: int64
        - name: product-id
          in: query
          type: integer
          format: int64
        - name: lottery-box-id
          in: query
          type: integer
          format: int64
      responses:
        200:
          description: OK
          schema:
            type: array
            items:
              $ref: '#/definitions/PurchaseInfoWithRelatedInfo'
        401:
          description: Unauthorized
        500:
          description: Internal Server Error

    post:
      tags:
        - purchase-info
      summary: くじ購入
      parameters:
        - in: body
          name: purchase-info
          required: true
          schema:
            $ref: '#/definitions/PurchaseInfoCustomerLotteryBoxOnly'
      responses:
        201:
          description: OK
          schema:
            $ref: '#/definitions/PurchaseInfoWithRelatedInfo'
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
        422:
          description: Unprocessable Entity
          schema:
            $ref: '#/definitions/ApiError'
        500:
          description: Internal Server Error

  /purchase-info/{id}:
    get:
      tags:
        - purchase-info
      summary: くじ購入情報ID検索
      parameters:
        - name: 'id'
          in: 'path'
          required: true
          type: 'integer'
          format: 'int64'
      responses:
        200:
          description: OK
          schema:
            $ref: '#/definitions/PurchaseInfoWithRelatedInfo'
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
        500:
          description: Internal Server Error

  /purchase-info/bulk:
    post:
      tags:
        - purchase-info
      summary: くじ複数購入
      parameters:
        - in: body
          name: purchase-info
          required: true
          schema:
            $ref: '#/definitions/PurchaseInfoWithTimesDrawLots'
      responses:
        201:
          description: Created
          schema:
            type: array
            items:
              $ref: '#/definitions/PurchaseInfoWithRelatedInfo'
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
        422:
          description: Unprocessable Entity
          schema:
            $ref: '#/definitions/ApiError'
        500:
          description: Internal Server Error
